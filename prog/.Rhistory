sessionInfo()
install("tidyverse")
install.packages("tidyverse")
install.packages("Rtools")
install.packages("tidyverse")
install.packages("devtools")
writeLines('PATH="${RTOOLS40_HOME}\\usr\\bin;${PATH}"', con = "~/.Renviron")
Sys.which("make")
install.packages("jsonlite", type = "source")
install.packages("devtools")
devtools::install_github("UI-Research/urbnthemes")
install.packages("devtools")
remotes::install_github(â€œUrbanInstitute/urbnthemes")
# Load packages
library(tidyverse)
library(lubridate)
library(dplyr)
#Set working directory
setwd("~/GitHub/COA/prog")
# Choose where to save outputs. Default is output folder in the github repo folder.
path <- c("../output/")
# Read in city list and coordinates
year_2018 <- read_csv("../y2018.csv")
year_2019 <- read_csv("../y2019.csv")
year_2020 <- read_csv("../y2020.csv")
year_2021 <- read_csv("../y2021.csv")
#Make annual counts for each year (for destined, not originated, COAs)
yearlycount_2018 <- year_2018 %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP))
View(yearlycount_2018)
View(yearlycount_2018)
yearlycount_2019 <- year_2019 %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP))
yearlycount_2020 <- year_2020 %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP))
list1 <- list(yearlycount_2018,yearlycount_2019,yearlycount_2020)
do.call("rbind", list1)
list1.df <- do.call("rbind", lapply(list1, as.data.frame))
write.csv(list1.df, file.path(path, "COA_yearlybyzip.csv"))
View(yearlycount_2018)
View(yearlycount_2018)
View(list1.df)
View(list1.df)
View(list1.df)
View(list1.df)
View(list1.df)
View(year_2018)
View(year_2019)
View(year_2020)
list <- list(year_2018,year_2019,year_2020,year_2021)
do.call("rbind", list)
list.df <- do.call("rbind", lapply(list, as.data.frame))
View(list)
View(list.df)
View(list.df)
list.df <- do.call("rbind", lapply(list, as.data.frame))
yearlycount_2018 <- year_2018 %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP),
yearlycount_2018$Added_Column <- "2018")
yearlycount_2018 <- year_2018 %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP))%>%
yearlycount_2018$Added_Column <- "2018"
yearlycount_2018 <- year_2018 %>%
group_by(ZIPCODE) %>%
yearlycount_2018$Added_Column <- "2018" %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP))
-------------------------------------------------------------------------------------------------
# Load packages
library(tidyverse)
library(lubridate)
library(dplyr)
#Set working directory
setwd("~/GitHub/COA/prog")
# Choose where to save outputs. Default is output folder in the github repo folder.
path <- c("../output/")
# Read in city list and coordinates
year_2018 <- read_csv("../y2018.csv")
year_2019 <- read_csv("../y2019.csv")
year_2020 <- read_csv("../y2020.csv")
year_2021 <- read_csv("../y2021.csv")
#Manually adjusted column names to get rid of spaces
#Combine into one file with all years, includes monthly counts by zip code
list <- list(year_2018,year_2019,year_2020,year_2021)
do.call("rbind", list)
list.df <- do.call("rbind", lapply(list, as.data.frame))
write.csv(list.df, file.path(path, "COA_monthbyzip.csv"))
#Make annual counts for each year (for destined, not originated, COAs)
yearlycount_2018 <- year_2018 %>%
group_by(ZIPCODE) %>%
yearlycount_2018$Added_Column <- "2018" %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP))
yearlycount_2018 <- year_2018 %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP))
yearlycount_2018$Added_Column <- "18"
View(yearlycount_2018)
View(yearlycount_2018)
yearlycount_2018 <- year_2018 %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP))
yearlycount_2018$Year <- "2018"
yearlycount_2019 <- year_2019 %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP))
yearlycount_2019$Year <- "2019"
yearlycount_2020 <- year_2020 %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP))
yearlycount_2020$Year <- "2020"
list1 <- list(yearlycount_2018,yearlycount_2019,yearlycount_2020)
do.call("rbind", list1)
list1.df <- do.call("rbind", lapply(list1, as.data.frame))
write.csv(list1.df, file.path(path, "COA_yearlybyzip.csv"))
View(list1.df)
View(list1.df)
list1.df %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(TOTAL_FROM_ZIP),
sum_business = sum(TOTAL_BUSINESS),
sum_family = sum(TOTAL_FAMILY),
sum_individual = sum(TOTAL_INDIVIDUAL),
sum_perm = sum(TOTAL_PERM),
sum_temp = sum(TOTAL_TEMP))
list1.df %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(sum_total),
sum_business = sum(sum_business),
sum_family = sum(sum_family),
sum_individual = sum(sum_individual),
sum_perm = sum(sum_perm),
sum_temp = sum(sum_temp))
View(list.df)
View(list.df)
View(list1.df)
View(list1.df)
COA_yearly <- list1.df %>%
group_by(ZIPCODE) %>%
summarise(sum_total = sum(sum_total),
sum_business = sum(sum_business),
sum_family = sum(sum_family),
sum_individual = sum(sum_individual),
sum_perm = sum(sum_perm),
sum_temp = sum(sum_temp))
View(COA_yearly)
View(COA_yearly)
View(list1.df)
View(list1.df)
write.csv(COA_yearly, file.path(path, "COA_yearlybyzip.csv"))
